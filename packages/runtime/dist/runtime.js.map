{
  "version": 3,
  "sources": ["../../utils/src/index.ts", "../src/vnode.ts", "../src/render.ts", "../src/index.ts"],
  "sourcesContent": ["// \u5B58\u653E\u90E8\u5206\u516C\u5171\u51FD\u6570\r\n\r\nexport function isObject(target: unknown): Boolean {\r\n    // \u5728JS\u4E2Dtypeof null\u4E5F\u662F\u8FD4\u56DEobject\uFF0C\u56E0\u6B64\u9700\u8981\u6392\u9664\r\n    return typeof target === 'object' && target !== null\r\n}\r\n\r\nexport function isArray(target: unknown): Boolean {\r\n    return Array.isArray(target)\r\n}\r\n\r\nexport function isFunction(target: unknown): Boolean {\r\n    return typeof target === 'function'\r\n}\r\n\r\nexport function isString(target: unknown): Boolean {\r\n    return typeof target === 'string'\r\n}\r\n\r\nexport function isNumber(target: unknown): Boolean {\r\n    return typeof target === 'number'\r\n}\r\n\r\nexport function isBoolean(target: unknown): Boolean {\r\n    return typeof target === 'boolean'\r\n}\r\n\r\n// \u9700\u8981\u6392\u9664NaN\u548CNaN\u4E0D\u5168\u7B49\u7684\u60C5\u51B5\r\nexport function hasChange(oldValue: unknown, newValue: unknown): Boolean {\r\n    return oldValue !== newValue && !(Number.isNaN(oldValue) && Number.isNaN(newValue))\r\n}\r\n\r\n", "import { Type, Props, Children, VNode } from './types'\r\nimport { isString, isNumber, isArray } from '@Biu/utils';\r\n/**\r\n * \u5224\u65ADVNode\u7684\u7C7B\u578B\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7type\u5C5E\u6027\u6765\u5B9E\u73B0\r\n * \u4F46ShapeFlags\u7528\u4E8E\u901A\u8FC7\u4F4D\u8FD0\u7B97\u6765\u5224\u65ADVNode\u53CA\u5176\u5B50\u8282\u70B9\u7684\u7C7B\u578B\uFF0C\u6027\u80FD\u66F4\u9AD8\r\n */\r\nexport enum ShapeFlags {\r\n    ELEMENT = 1, // \u666E\u901A\u5143\u7D20\uFF0C 00000001\r\n    TEXT = 1 << 1, // \u6587\u672C\u5143\u7D20\uFF0C 00000010\r\n    FRAGMENT = 1 << 2, // \u865A\u62DF\u5143\u7D20\uFF0C00000100\r\n    COMPONENT = 1 << 3, // \u7EC4\u4EF6\uFF0C00001000\r\n    TEXT_CHILDREN = 1 << 4, // \u6587\u672C\u5B50\u8282\u70B9\uFF0C00010000\r\n    ARRAY_CHILDREN = 1 << 5, // \u6570\u7EC4\u5B50\u8282\u70B9\uFF0C00100000\r\n    CHILDREN = (1 << 4) | (1 << 5) // 00110000\r\n}\r\n\r\n// \u6587\u672C\u5143\u7D20\u548CFragment\u5143\u7D20\u7684type\u4F7F\u7528Symbol\u505A\u552F\u4E00\u6807\u8BC6\r\nexport const Text = Symbol('Text')\r\nexport const Fragment = Symbol('Fragment')\r\n\r\n/**\r\n * h\u51FD\u6570\uFF0C\u5373\u201CcreateVNode\u201D\u51FD\u6570\uFF0C\u521B\u5EFA\u4E00\u4E2A\u865A\u62DFDOM\u3002\r\n * \u914D\u5408render\u51FD\u6570\uFF0C\u53EF\u4EE5\u5C06\u865A\u62DFDOM\u751F\u6210\u771F\u5B9EDOM\u3002\r\n */\r\nexport function h(type: Type, props?: Props, children?: Children): VNode {\r\n    let shapeFlag: number;\r\n    // \u5148\u5224\u65AD\u9700\u8981\u751F\u6210\u7684\u7236\u5143\u7D20\u7C7B\u578B\r\n    if (isString(type)) {\r\n        // \u56E0\u4E3AText\u548CFragment\u90FD\u7528Symbol\u4F5C\u4E86\u6807\u8BB0\uFF0C\u5982\u679Ctype\u662F\u666E\u901A\u5B57\u7B26\u4E32\uFF0C\u76F4\u63A5\u5F53\u5143\u7D20\u5904\u7406\uFF0C\r\n        shapeFlag = ShapeFlags.ELEMENT\r\n    } else if (type === Text) {\r\n        shapeFlag = ShapeFlags.TEXT\r\n    } else if (type === Fragment) {\r\n        shapeFlag = ShapeFlags.FRAGMENT\r\n    } else {\r\n        // \u76EE\u524D\u53EA\u5B9E\u73B0\u56DB\u79CD\u6838\u5FC3\u7C7B\u578B\uFF0C\u56E0\u6B64\u5176\u4F59\u4E00\u5F8B\u4F5C\u4E3AComponent\u5904\u7406\r\n        shapeFlag = ShapeFlags.COMPONENT\r\n    }\r\n\r\n    // \u518D\u5224\u65AD\u5B50\u5143\u7D20\u7C7B\u578B\r\n    if (isString(children) || isNumber(children)) {\r\n        // \u6216\u7B49\u8FD0\u7B97\uFF0C\u5C06shapeFlag\u53E0\u4E0A\u7236\u5143\u7D20\u7C7B\u578B\r\n        shapeFlag |= ShapeFlags.TEXT_CHILDREN\r\n        isNumber(children) && (children = (<Number>children).toString())\r\n    } else if (isArray(children)) {\r\n        shapeFlag |= ShapeFlags.ARRAY_CHILDREN\r\n    }\r\n    return {\r\n        type,\r\n        props,\r\n        children,\r\n        shapeFlag\r\n    }\r\n\r\n}", "import { VNode, Container, Props, CSSStyleName } from './types'\r\nimport { ShapeFlags } from './vnode'\r\n\r\nimport { isBoolean } from '@Biu/utils'\r\n/** \u6E32\u67D3\u51FD\u6570\uFF0C\u5C06\u4F20\u5165\u7684\u865A\u62DFDOM\u89E3\u6790\u3001\u5904\u7406\u5E76\u6E32\u67D3\u5230\u9875\u9762\u7684\u771F\u5B9EDOM\u4E0A */\r\nexport function render(vnode: VNode, container: Container) {\r\n    mount(vnode, container)\r\n}\r\n\r\nfunction mount(vnode: VNode, container: Container) {\r\n    const { shapeFlag } = vnode;\r\n    // \u7528\u4F4D\u4E0E\u8FD0\u7B97\u786E\u5B9A\u7C7B\u578B\uFF0C\u518D\u8C03\u7528\u76F8\u5E94\u7684\u6302\u8F7D\u51FD\u6570\r\n    if (shapeFlag & ShapeFlags.ELEMENT) {\r\n        mountElement(vnode, container)\r\n    } else if (shapeFlag & ShapeFlags.TEXT) {\r\n        mountTextNode(vnode, container)\r\n    } else if (shapeFlag & ShapeFlags.FRAGMENT) {\r\n        mountFragment(vnode, container)\r\n    } else {\r\n        mountComponent(vnode, container)\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction mountElement(vnode: VNode, container: Container) {\r\n    const { type, props } = vnode;\r\n    const el = document.createElement(<keyof HTMLElementTagNameMap>type);\r\n    props && mountProps(props, el);\r\n    mountChildren(vnode, el);\r\n    container.appendChild(el);\r\n}\r\n\r\n// Text\u8282\u70B9\u7684children\u5C31\u662F\u4ED6\u7684\u6587\u672C\u5185\u5BB9\r\nfunction mountTextNode(vnode: VNode, container: Container) {\r\n    const textNode = document.createTextNode(<string>(vnode.children))\r\n    container.appendChild(textNode)\r\n}\r\n\r\nfunction mountFragment(vnode: VNode, container: Container) {\r\n    mountChildren(vnode, container)\r\n}\r\nfunction mountComponent(vnode: VNode, container: Container) {\r\n\r\n}\r\n\r\nfunction mountChildren(vnode: VNode, container: Container) {\r\n    const { shapeFlag, children } = vnode;\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n        mountTextNode(vnode, container)\r\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        (<VNode[]>children).forEach(child => {\r\n            mount(child, container)\r\n        })\r\n    }\r\n}\r\n/**\r\n * \u76EE\u524D\u53EA\u5B9E\u73B0\u57FA\u672C\u7C7B\u578B\u7684props\u7684\u8BC6\u522B\uFF1A\r\n * 1\u3001class\u53EA\u80FD\u662F\u5B57\u7B26\u4E32\u7C7B\u578B\r\n * 2\u3001style\u53EA\u80FD\u662F\u5BF9\u8C61\u7C7B\u578B\r\n * 3\u3001\u4E8B\u4EF6\u53EA\u80FD\u4EE5on\u5F00\u5934\uFF0C\u4E14\u4E8B\u4EF6\u540D\u9996\u5B57\u6BCD\u5927\u5199\r\n */\r\n\r\n/**\r\n * About Attributes and DOM Properties\r\n * Attr\uFF1A\u5B58\u5728\u4E8E\u6807\u7B7E\u4E0A\u7684\u5C5E\u6027\uFF0CProp\uFF1A\u5B58\u5728\u4E8EDOM\u5BF9\u8C61\u7684\u5C5E\u6027\r\n * \u6D4F\u89C8\u5668\u5728\u751F\u6210DOM\u5BF9\u8C61\u65F6\uFF0C\u5982\u679C\u68C0\u6D4B\u5230\u6807\u51C6\u5C5E\u6027\uFF0CDOM\u5BF9\u8C61\u4E2D\u4E5F\u4F1A\u5305\u542B\u5BF9\u5E94\u7684\u5C5E\u6027\u540D\uFF08\u5373Prop\uFF09\r\n * \u4F8B\u5982document.body.id\u3002\r\n * \u800C\u975E\u6807\u51C6\u5C5E\u6027\u4E0D\u4F1A\u8F6C\u5316\u6210Prop\u3002\r\n * \u5982\uFF1A\u5728\u6807\u7B7E\u8BBE\u7F6E\u4E86custom = '123' ,document.body.custom = undefined\r\n * \u800CsetAttribute\u5219\u53EF\u4EE5\u5C06\u81EA\u5B9A\u4E49\u5C5E\u6027\u8BBE\u7F6E\u5230Prop\u4E2D\uFF0C\u770B\u4F3C\u662F\u4E07\u80FD\u7684\uFF0C\u4F46\uFF1A\r\n * 1\u3001setAttribute\u4F1A\u628A\u6240\u6709\u5C5E\u6027\u90FD\u8BBE\u7F6E\u4E3Astring\u7C7B\u578B\uFF0C\r\n * 2\u3001checked\u3001disabled\u53EA\u8981\u51FA\u73B0\u4E86\uFF0C\u5BF9\u5E94\u7684property\u5C31\u4F1A\u88AB\u521D\u59CB\u5316\u4E3Atrue\uFF08\u5373\u4F7F\u4F20\u9012\u4E86\"false\"\uFF09\uFF0C\u53EA\u6709removeAttribute\uFF0C\u624D\u4F1A\u53D8\u6210false\r\n */\r\nconst domPropsReg = /[A-Z]|^(value|checked|selected|muted|disabled)$/; //A-Z\u4E3A\u4E86\u5339\u914DinnerHTML\u548CtextContent\r\nconst eventReg = /^(on)[A-Z][a-zA-Z]*/;\r\nfunction mountProps(props: Props, el: Container) {\r\n    for (const key in props) {\r\n        let value = props[key]\r\n        switch (key) {\r\n            case 'class':\r\n                console.log(value);\r\n\r\n                el.className = value;\r\n                break;\r\n            case 'style':\r\n                for (const styleName in value) {\r\n                    el.style[<CSSStyleName>styleName] = value[styleName]\r\n                }\r\n                break;\r\n            default:\r\n                if (eventReg.test(key)) {\r\n                    // \u5224\u5B9A\u4E3A\u4E8B\u4EF6\r\n                    const eventName = key.slice(2).toLowerCase()\r\n                    el.addEventListener(eventName, value)\r\n                } else if (domPropsReg.test(key)) {\r\n                    // \u5904\u7406\u4E00\u79CD\u7279\u6B8A\u60C5\u51B5\uFF0C<input checked />, \u865A\u62DFDOM\u89E3\u6790\u4E3A{checked: \"\"}\uFF0C\u76F4\u63A5\u8D4B\u503C\u4F1A\u88AB\u89E3\u6790\u4E3Afalse\uFF0C\u5E94\u5F53\u624B\u52A8\u8BBE\u7F6E\u4E3Atrue\r\n                    if (value === \"\" && isBoolean(value)) {\r\n                        value = true;\r\n                    }\r\n                    // \u5224\u5B9A\u4E3A\u7279\u6B8A\u7684Attr\uFF0C\u5FC5\u987B\u76F4\u63A5\u5728DOM\u4E0A\u8BBE\u7F6E\r\n                    el[key] = value;\r\n\r\n                } else {\r\n                    // \u5904\u7406\u7279\u6B8A\u60C5\u51B5, {checked: false}, \u5E94\u5F53\u4F7F\u7528removeAttrbute\u53BB\u8BBE\u7F6E\r\n                    if (value === false || value === undefined || value === null) {\r\n                        el.removeAttribute(key)\r\n                    }\r\n                    // \u5176\u4ED6\u7684\u4E00\u5F8B\u76F4\u63A5\u4F7F\u7528setAttrbute\u8FDB\u884C\u8BBE\u7F6E\r\n                    el.setAttribute(key, value)\r\n                }\r\n        }\r\n    }\r\n}", "// export { h, Text, Fragment } from './vnode'\r\n// export { render } from './render'\r\nimport { h, Text, Fragment } from './vnode'\r\nimport { render } from './render'\r\n\r\n\r\n\r\nconst vnode = h('div', {\r\n    class: 'a b',\r\n    style: {\r\n        border: '1px solid darkred',\r\n        fontSize: '14px',\r\n    },\r\n    onClick: () => console.log('?'),\r\n    id: 'foo',\r\n    checked: false,\r\n    custom: false\r\n}, [h('ul', null, [\r\n    h('li', { style: { color: 'red' } }, 1),\r\n    h('li', null, 2),\r\n    h('li', { style: { color: 'blue' } }, 3),\r\n    h(Fragment, null, [\r\n        h('li', null, 4),\r\n        h('li',null,55)\r\n    ]),\r\n    h('li', null, [h(Text, null, 'hello world')])\r\n])])\r\n\r\nconst c =\r\n    render(vnode, document.body)"],
  "mappings": "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",
  "names": []
}
